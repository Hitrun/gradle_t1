group 'com.gradle.demo'
version '1.0-SNAPSHOT'

//allprojects{} subprojects{}
apply plugin: 'java'

sourceCompatibility = 1.8

//configurations.all {//依赖冲突报错
//    resolutionStrategy{
//        failOnVersionConflict()
//        force ''//解决冲突 强制指定
//    }
//}

repositories {//按顺序 优先使用
    maven{//私服地址
        url 'http://maven.aliyun.com/nexus/content/groups/public'
    }
    mavenLocal()//本地
    mavenCentral()//中心
}

dependencies {
    //compile project(":module")依赖的模块
    testCompile group: 'junit', name: 'junit', version: '4.12'//等价于'group:name:version'
//    compile(){//解决冲突 排除低版本依赖
//        exclude group:" ", module:""
//    }
}

def createDir = {//创建目录的闭包
    path ->
        File dir = new File(path);
        if(!dir.exists()){//如果不存在 就创建目录
            dir.mkdirs();
        }
}
task makeJavaDir(){//自定义创建Java目录任务
    def paths = ['src/main/java','src/main/resources','src/test/java','src/test/resources'];
    doFirst {
        paths.forEach(createDir);
    }
}
task makeWebDir(){//自定义web目录任务
    dependsOn 'makeJavaDir'
    def paths = ['src/main/webapp','src/test/webapp'];
    doLast {
        paths.forEach(createDir);
    }
}
